<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">

    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jquery-3.7.1.min.js"></script>

    <script>
        let sp1 = {hinhanh: "../img/bai2/car6.jpg", dongia:100, soluong: 10};
        let sp2 = {hinhanh: "../img/bai2/car7.jpg", dongia:200, soluong: 100};
        let sp3 = {hinhanh: "../img/bai2/car8.jpg", dongia:10, soluong: 10};
        let sp4 = {hinhanh: "../img/bai2/car9.jpg", dongia:300, soluong: 50};
        let sp5 = {hinhanh: "../img/bai2/car10.jpg", dongia:120, soluong: 10};
        let dssp = [sp1, sp2, sp3, sp4, sp5];

        let i = 0;

        function napSanpham(sanpham, index){
            let tbl =$("#myTable");
            let row =
                `
                <tr>
                    <td style="line-height:180px;">${++i}</td>
                    <td style="line-height:180px;"><img width='200' src="${sanpham.hinhanh}"></td>
                    <td style="line-height:180px;">${sanpham.dongia}</td>
                    <td class="align-content-center">
                        <input type="text" class="form-control">
                    </td>
                </tr>
                `
            $('#myTable').append(row);
        }

        function tinhTongtien(){
            let tbl = document.getElementById("myTable");
            let tongtien = 0;
            var inputs=$("input");
            for(let i = 0; i < tbl.rows.length; i++){
                let dongia = tbl.rows[i].cells[2].innerHTML;
                let soluong = inputs.eq(i).val();
                let thanhtien = dongia * soluong;
                tongtien += thanhtien;
            }
            document.getElementById("lblTongtien").innerHTML = tongtien;
        }

        window.onload = function(){
            dssp.forEach(napSanpham);
            $("input").blur(()=>{
                tinhTongtien();
            })
        }
    </script>
       
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Hình ảnh</th>
                            <th>Đơn giá</th>
                            <th>Số lượng</th>
                        </tr>
                    </thead>
                    <tbody id="myTable">
                    </tbody>
                    <tfoot>
                        <tr>
                            <td></td>
                            <td></td>
                            <td class="font-weight-bold">Tổng thành tiền</td>
                            <td class="font-weight-bold">
                                <label id="lblTongtien"></label>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</body>
</html>